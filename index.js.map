{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/loader-handler.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46590311-6ed07305336452fed03a33c90';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nasync function getPhotos({ page, perPage, query }) {\n  const response = await axios.get(`?key=${API_KEY}`, {\n    params: {\n      q: query,\n      page,\n      per_page: perPage,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n    },\n  });\n  return response.data;\n}\n\nexport default getPhotos;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction createGalleryItemMarkup(cards) {\n  return cards\n    .map(\n      ({\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        largeImageURL,\n      }) => `\n      <div class=\"photo-card\">\n        <a href=\"${largeImageURL}\" class=\"photo-link\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"gallery-image\" data-source=${largeImageURL}/>\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\">\n            <b>Likes</b><br>${likes}\n          </p>\n          <p class=\"info-item\">\n            <b>Views</b><br>${views}\n          </p>\n          <p class=\"info-item\">\n            <b>Comments</b><br>${comments}\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads</b><br>${downloads}\n          </p>\n        </div>\n      </div>`\n    )\n    .join('');\n}\n\nconst msgOptions = {\n  timeout: 5000,\n  position: 'topRight',\n  transitionIn: 'bounceInDown',\n  transitionOut: 'fadeOutUp',\n  transitionInMobile: 'bounceInDown',\n  transitionOutMobile: 'fadeOutUp',\n  messageSize: '16px',\n  theme: 'dark',\n  messageColor: 'white',\n};\n\nfunction showError(errorCode) {\n  iziToast.error({\n    ...msgOptions,\n    backgroundColor: '#ef4040',\n    message: `Error!<br><b>${errorCode}</b><br>Please try again!`,\n  });\n}\n\nfunction showNotFound(query) {\n  iziToast.error({\n    ...msgOptions,\n    backgroundColor: '#ef4040',\n    message: `Sorry, there are no images matching your <br><b>${query}</b> query.<br>Please try again!`,\n  });\n}\n\nfunction showEmptyQuery() {\n  iziToast.info({\n    ...msgOptions,\n    backgroundColor: '#ffa000',\n    message: `Sorry, we can't search empty query.<br>Please try again!`,\n  });\n}\n\nexport default createGalleryItemMarkup;\nexport { showError };\nexport { showNotFound };\nexport { showEmptyQuery };\n","export default class LoaderHandler {\n  static HIDDEN_CLASS = 'visually-hidden';\n\n  constructor(galleryEl, loaderEl, loadMoreEl, endMessageEl) {\n    this.gallery = galleryEl;\n    this.loader = loaderEl;\n    this.loadMore = loadMoreEl;\n    this.endMessage = endMessageEl;\n  }\n\n  setHided() {\n    this.gallery.classList.add(LoaderHandler.HIDDEN_CLASS);\n    this.loader.hidden = true;\n    this.loadMore.hidden = true;\n    this.endMessage.hidden = true;\n  }\n\n  setLoading() {\n    this.loader.hidden = false;\n  }\n\n  setLoaded() {\n    this.loader.hidden = true;\n    this.loadMore.hidden = true;\n  }\n\n  setGalleryShow() {\n    this.gallery.classList.remove(LoaderHandler.HIDDEN_CLASS);\n  }\n\n  setLoadMore() {\n    this.loader.hidden = true;\n    this.loadMore.hidden = false;\n  }\n\n  setFinalShow() {\n    this.loader.hidden = true;\n    this.gallery.classList.remove(LoaderHandler.HIDDEN_CLASS);\n    this.loadMore.hidden = true;\n    this.endMessage.hidden = false;\n  }\n}\n","import getPhotos from './js/pixabay-api';\nimport createGalleryItemMarkup from './js/render-functions';\nimport { showNotFound, showError, showEmptyQuery } from './js/render-functions';\nimport LoaderHandler from './js/loader-handler';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst formEl = document.querySelector('form');\nconst galleryEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreEl = document.querySelector('.load-more');\nconst endMessageEl = document.querySelector('.end-collection');\n\nconst loaderHandler = new LoaderHandler(\n  galleryEl,\n  loaderEl,\n  loadMoreEl,\n  endMessageEl\n);\n\nloaderHandler.setHided();\n\nformEl.addEventListener('submit', btnOnSubmit);\n\nlet galleryLightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet totalPages = 1;\nconst params = {\n  query: '',\n  page: 1,\n  perPage: 15,\n};\n\nasync function btnOnSubmit(event) {\n  event.preventDefault();\n  loaderHandler.setHided();\n\n  params.page = 1;\n  params.query = event.target[0].value.trim();\n\n  if (params.query === '') {\n    showEmptyQuery();\n    return;\n  }\n\n  loaderHandler.setLoading();\n  galleryEl.innerHTML = '';\n\n  getPhotos(params)\n    .then(data => {\n      if (data.hits.length === 0) {\n        galleryEl.innerHTML = '';\n        loaderHandler.setLoaded();\n        showNotFound(userQuery);\n        return;\n      }\n\n      totalPages = Math.ceil(data.totalHits / data.hits.length);\n\n      if (params.page < totalPages) {\n        loaderHandler.setLoadMore();\n        loadMoreEl.addEventListener('click', loadMoreOnClick);\n      } else {\n        loaderHandler.setFinalShow();\n      }\n\n      loaderHandler.setGalleryShow();\n      galleryEl.innerHTML = createGalleryItemMarkup(data.hits);\n      galleryLightbox.refresh();\n    })\n    .catch(error => showError(error));\n}\n\nasync function loadMoreOnClick() {\n  params.page += 1;\n\n  loaderHandler.setLoading();\n\n  getPhotos(params)\n    .then(data => {\n      loaderHandler.setLoaded();\n\n      if (params.page >= totalPages) {\n        loaderHandler.setFinalShow();\n      } else {\n        loaderHandler.setLoadMore();\n      }\n\n      galleryEl.insertAdjacentHTML(\n        'beforeend',\n        createGalleryItemMarkup(data.hits)\n      );\n      galleryLightbox.refresh();\n\n      window.scrollBy({\n        top: window.innerHeight,\n        left: 0,\n        behavior: 'smooth',\n      });\n    })\n    .catch(error => showError(error));\n}\n"],"names":["API_KEY","axios","getPhotos","page","perPage","query","createGalleryItemMarkup","cards","webformatURL","tags","likes","views","comments","downloads","largeImageURL","msgOptions","showError","errorCode","iziToast","showNotFound","showEmptyQuery","_LoaderHandler","galleryEl","loaderEl","loadMoreEl","endMessageEl","__publicField","LoaderHandler","formEl","loaderHandler","btnOnSubmit","galleryLightbox","SimpleLightbox","totalPages","params","event","data","loadMoreOnClick","error"],"mappings":"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"}